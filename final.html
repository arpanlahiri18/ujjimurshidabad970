<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>My Geom three.js app</title>
    <style>
        body {
            margin: 0;
        }
    </style>
</head>

<body>




    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r126/three.min.js"
        integrity="sha512-n8IpKWzDnBOcBhRlHirMZOUvEq2bLRMuJGjuVqbzUJwtTsgwOgK5aS0c1JA647XWYfqvXve8k3PtZdzpipFjgg=="
        crossorigin="anonymous"></script>


    <script src="https://cdn.rawgit.com/mrdoob/three.js/master/examples/js/loaders/GLTFLoader.js"></script>
    
    <script src="https://threejs.org/examples/js/controls/OrbitControls.js" ></script>
    
    
    
    
    <script>

        //https://www.youtube.com/watch?v=xR8ArD6o0jc
        //https://medium.com/@matthewmain/how-to-import-a-3d-blender-object-into-a-three-js-project-as-a-gltf-file-5a67290f65f2
        //Mesh Basic material doesnt react with light
        //https://www.youtube.com/watch?v=e_WC3b5Hy8Q


        const scene = new THREE.Scene();// Creating Scene
        var pulp;
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 0.15, 0);
        var renderer = new THREE.WebGLRenderer({ alpha: true });
        renderer.setClearColor(0xffffff, 0);


        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        var light = new THREE.PointLight(0xffffff, 1, 0);
        // Specify the light's position
        light.position.set(4.5, 10, 10);

        // Add the light to the scene
        scene.add(light)
        var texture = new THREE.TextureLoader().load("redPattern.jpg");;


        const controls = new THREE.OrbitControls( camera, renderer.domElement );
        //controls.target = new THREE.Vector(0.04015782814325886,-0.008092276235980456,-0.10378686663907769)
        
        //texture.flipY = false;
        var model;
        var loader = new THREE.GLTFLoader();
        loader.load('shirtFour.glb', (gltf) => {
            model = gltf.scene;
            //model.material= THREE.MeshLambertMaterial();
            //model.material.map = texture;
            //

            model.traverse((o) => {
                if (o.isMesh) {

                    console.log(o.name);
                    // note: for a multi-material mesh, `o.material` may be an array,
                    // in which case you'd need to set `.map` on each value.
                   // if ((o.name === "path1426")||(o.name === "path1416")||(o.name === "path1419")||(o.name === "path1434")) {
                        //pulp = o;
                        
                        if(o.name!="Plane"){
                            console.log("Done Pulping");
                        o.material = new THREE.MeshBasicMaterial({
                            map : texture,
                            side: THREE.DoubleSide
                        });
                        o.material.blending = THREE.MultiplyBlending;
                        o.material.transparent = true;
                        o.material.needsUpdate = true;}
                   // }
                }
            });
            
            scene.add(model);
            camera.lookAt(model.position);
            //model.position.set(camera.position);
            //model.postion.y+=1;
        },

            function (xhr) {
                console.log((xhr.loaded / xhr.total * 100) + '% loaded');
                if((xhr.loaded / xhr.total * 100)==100){
                   
            
                    // putin();
                }
            },
            function (error) {
                console.log('An error happened---' + error);
            }
        );

       




        /*
                var loader = new THREE.GLTFLoader();
                loader.load(
                    // resource URL
                    'try.gltf',
                    // Callback called when the resource is loaded
                    function (gltf) {
        
                        // Here you're adding it to the scene. Note that the gltf.scene is the actual model (Or the scene exported from blender
                        scene.add(gltf.scene);
        
                    },
                    // called while loading is progressing
                    function (xhr) {
        
                        console.log((xhr.loaded / xhr.total * 100) + '% loaded');
        
                    },
                    // called when loading has errors
                    function (error) {
        
                        console.log('An error happened');
        
                    }
                    
                );*/

        function animate() {
            render();
            //controls.target.set(0.04015782814325886,-0.008092276235980456,-0.10378686663907769);
            controls.update();
            requestAnimationFrame(animate);
        }

        function render() {
            renderer.render(scene, camera);
        }
        render();
        animate();
    </script>
</body>

</html>